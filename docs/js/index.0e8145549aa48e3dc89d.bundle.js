!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);var i=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return console.error(new Error("You should enter a route to fetch").message);if("string"!==typeof t&&console.error(new Error("The route parameter should be a string.").message),e){if("string"!==typeof e&&console.error(new Error("Method should be a string").message),!["GET","POST","PUT","DELETE"].includes(e.toUpperCase()))return console.error(new Error("The ".concat(e," is not available for now.")).message)}else e="GET";return n=r.useCustomRoute?o({},r.headers):o({},r.headers,{"Content-Type":"application/json"}),fetch(r.useCustomRoute?t:"https://newsapp.dwsapp.io/api/news".concat(t),{method:e.toUpperCase(),headers:o({},n),body:r.body&&JSON.stringify(r.body)}).then((function(t){return t.json()})).then((function(t){return t}))},s=function(t){return function(t){var e=document.createElement("header");e.setAttribute("class","container mt-3"),e.innerHTML='\n        <div class="row">\n            <div class="col-9 d-flex align-items-center">\n                <h1 class="display-5"><a href="'.concat(window.location.origin+"/",'">News</a></h1>\n\t\t\t</div>\n\t\t\t').concat(sessionStorage.getItem("userToken")?'<div class="col-3 d-flex align-items-center justify-content-end">\n\t\t\t\t\t\t<small class="text-danger" id="disconnect">Disconnect</small>\n\t\t\t\t\t</div>':"","\n        </div>\n        "),t.appendChild(e),document.querySelector("#disconnect")&&document.querySelector("#disconnect").addEventListener("click",(function(){sessionStorage.clear(),window.location.href=window.location.origin+"/"}))}(t)},c=function(t,e,n){return function(){var r=document.createElement("section");r.style="position:absolute;top: ".concat(n,"px; right: 2%; margin: 0 auto; height: 5vh;"),t?r.classList.add("snackbar","bg-danger","d-flex","justify-content-center","align-items-center","rounded","p-2"):r.classList.add("snackbar","bg-success","d-flex","justify-content-center","align-items-center","rounded","p-2"),r.innerHTML='\n\t\t\t<p class="text-light m-0">'.concat(e,' consultez la liste <a href="').concat(window.location.origin+"/bookmark",'">i\xe7i</a></p>\n\t\t'),document.querySelector("body").appendChild(r);var o=setInterval((function(){if(4===a)return clearInterval(o),document.querySelector("body").removeChild(document.querySelector(".snackbar"));a+=1}),1e3),a=0}()},l=function(t){if(sessionStorage.getItem("userToken"))return i("https://newsapp.dwsapp.io/api/me","post",{useCustomRoute:!0,headers:{"content-type":"application/json"},body:{token:sessionStorage.getItem("userToken")}}).then((function(e){return null===e.err?i("/sources","POST",{headers:{"content-type":"application/json"},body:{news_api_token:"18ac21a546b0446fa4659315f42934ff"}}).then((function(t){return n(t)})):(t.innerHTML="",state.error=!0,state.msg=e.message,n())}));function e(t,e,n){return i("/".concat(e,"/").concat(""===n?null:n),"POST",{body:{news_api_token:"18ac21a546b0446fa4659315f42934ff"}}).then((function(e){return function(t,e){return document.querySelector(".card-wrapper")&&(document.querySelector(".card-wrapper").innerHTML=""),function(){var n=document.createElement("section");n.classList.add("container"),n.innerHTML='\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-12 card-wrapper" style="display:flex;flex-wrap:wrap;justify-content:space-between;"></div>\n\t\t\t</div>\n\t\t',t.appendChild(n);var r=document.querySelector(".card-wrapper");e.map((function(t,e){var n=document.createElement("div");n.classList.add("card"),n.style="width:32%;margin: 4% 0;",n.innerHTML='\n\t\t\t\t<img class="card-img-top" src="'.concat(t.urlToImage,'"/>\n\t\t\t\t<div class="card-body">\n\t\t\t\t\t<h5 class="card-title">').concat(t.author,'</h5>\n\t\t\t\t\t<p class="card-text">').concat(t.description,'</p>\n\t\t\t\t\t<a href="').concat(t.url,'" class="btn btn-primary" target="_blank">Read</a>\n\t\t\t\t\t<small class="article-').concat(e,'">Bookmark</small>\n\t\t\t\t</div>\n\t\t\t'),r.appendChild(n),document.querySelector(".article-".concat(e)).addEventListener("click",(function(e){i("https://newsapp.dwsapp.io/api/bookmark/","post",{useCustomRoute:!0,headers:{"content-type":"Application/json"},body:{id:t.source.id,name:t.source.name,description:t.description,url:t.url,category:"general",language:"en",country:"us",token:sessionStorage.getItem("userToken")}}).then((function(n){return null===n.err?c(!1,"".concat(t.author," ajout\xe9 aux favoris"),e.pageY):c(!0,"".concat(t.author," existe d\xe9ja"),e.pageY)}))}))}))}()}(t,e.data.articles)}))}function n(n){var r=document.createElement("form");r.classList.add("container","rounded","border","border-primary","mt-4"),r.innerHTML='\n\t\t<div class="row p-3">\n\t\t\t<div class="col-12">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label><small>Source</small></label>\n\t\t\t\t\t<select class="form-control"></select>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label><small>Search articles<small></label>\n\t\t\t\t\t<input type="text" class="form-control col-5"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t',t.appendChild(r);var o=document.querySelector("select"),a=document.querySelector("input");o.addEventListener("change",(function(n){return e(t,n.target.value,document.querySelector("input").value)})),a.addEventListener("input",(function(n){return e(t,document.querySelector("select").value,n.target.value)})),n.data.sources.map((function(t){var e=document.createElement("option");e.textContent=t.id,o.appendChild(e)})),e(t,o.value,a.value)}},u=function(t){i("https://newsapp.dwsapp.io/api/me","POST",{useCustomRoute:!0,headers:{"Content-Type":"application/json"},body:{token:sessionStorage.getItem("userToken")}}).then((function(e){if(null===e.err)return function e(n){t.querySelector("section")&&t.removeChild(t.querySelector("section"));var r=document.createElement("section");r.classList.add("container"),r.innerHTML='\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-12 bookmark-list"></div>\n\t\t\t</div>\n\t\t',t.appendChild(r),n.map((function(t,r){var o=document.createElement("article");o.classList.add("border","rounded-left","border-dark","".concat(0===r&&"mt-4"),"p-2"),o.innerHTML='\n\t\t\t\t<h2 style="font-size:1.1rem;">'.concat(t.name,'</h2>\n\t\t\t\t<p class="text-secondary m-0" style="font-size:12px;">').concat(t.description,'</p>\n\t\t\t\t<div class="d-flex mt-2">\n\t\t\t\t\t<p class="text-primary m-0" style="font-size:10px;"><a href=\'').concat(t.url,'\' target="_blank">Read</a></p>\n\t\t\t\t\t<p class="text-danger bk-').concat(r,'" style="font-size:10px; margin: 0 0 0 1%;">Delete</p>\n\t\t\t\t</div>\n\t\t\t'),document.querySelector(".bookmark-list").appendChild(o),document.querySelector(".bk-".concat(r)).addEventListener("click",(function(){i("https://newsapp.dwsapp.io/api/bookmark/".concat(t._id),"delete",{useCustomRoute:!0,headers:{"Content-type":"Application/json"},body:{token:sessionStorage.getItem("userToken")}}).then((function(t){if(null===t.err)return n.map((function(e){return e._id===t.data._id&&n.splice(n.indexOf(e),1)})),e(n)}))}))}))}(e.data.bookmark)}))};!function(t){if("/"===window.location.pathname||"/inscription"===window.location.pathname)return function(t,e){var n={error:!1,msg:""};if(sessionStorage.getItem("userToken"))return i("https://newsapp.dwsapp.io/api/me","post",{useCustomRoute:!0,headers:{"content-type":"application/json"},body:{token:sessionStorage.getItem("userToken")}}).then((function(t){return t.err?r():window.location.href=window.location.origin+"/news"}));function r(){var o=document.createElement("form");o.classList.add("container"),o.style="height:100vh;display:flex;justify-content:center;align-items:center;",o.innerHTML='\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-12 p-5 rounded border '.concat(n.error?"border-danger":"bordeprimary",'">\n\t\t\t\t').concat(n.error?'<div class="form-group bg-danger rounded p-2">\n\t\t\t\t\t\t<p class="text-light" style="margin:0;">'.concat(n.msg,"</p>\n\t\t\t\t\t</div>"):"",'\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><small>Email</small></label>\n\t\t\t\t\t\t<input type="mail" class="form-control"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><small>Password</small></label>\n\t\t\t\t\t\t<input type="password" class="form-control"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t').concat("/inscription"===e?'<div class="form-group">\n\t\t\t\t\t\t\t\t<label><small>Name</small></label>\n\t\t\t\t\t\t\t\t<input type="text" class="form-control" name="name"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t<label><small>Surname</small></label>\n\t\t\t\t\t\t\t\t<input type="text" class="form-control" name="surname"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t':"",'\n\t\t\t\t\t<button type="submit" class="btn btn-primary mb-auto">').concat("/"===e?"Login":"Register",'</button>\n\t\t\t\t\t<div class="form-group mt-2">\n\t\t\t\t\t\t<small>').concat("/inscription"===e?'Already have an account ?<a href="'.concat(window.location.origin+"/",'">Click here</a>'):'Do not have an account yet ?<a href="'.concat(window.location.origin+"/inscription",'">Click here</a>'),"\n\t\t\t\t\t\t</small>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),t.appendChild(o),document.querySelector("form").addEventListener("submit",(function(o){o.preventDefault();var a=document.querySelector("input[type=mail]"),s=document.querySelector("input[type=password]");if(0!==!a.value.length&&!1===/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a.value))return t.innerHTML="",n.error=!0,n.msg="Email incorrect",r();if(0===s.value.length)return t.innerHTML="",n.error=!0,n.msg="Enter a password",r();if("/inscription"===e){var c=document.querySelector("input[name=name]"),l=document.querySelector("input[name=surname]");return 0===c.value.length?(t.innerHTML="",n.error=!0,n.msg="Enter a name",r()):0===l.value.length?(t.innerHTML="",n.error=!0,n.msg="Enter a surname",r()):i("https://newsapp.dwsapp.io/api/register","post",{useCustomRoute:!0,headers:{"content-type":"application/json"},body:{email:a.value,password:s.value,firstname:c.value,lastname:l.value}}).then((function(e){return null===e.err?i("https://newsapp.dwsapp.io/api/login","post",{useCustomRoute:!0,headers:{"content-type":"application/json"},body:{email:a.value,password:s.value}}):(t.innerHTML="",n.error=!0,n.msg=e.message,r())})).then((function(t){sessionStorage.setItem("userToken",t.data.token),window.location.href=window.location.origin+"/news"}))}return i("https://newsapp.dwsapp.io/api/login","post",{useCustomRoute:!0,headers:{"content-type":"application/json"},body:{email:a.value,password:s.value}}).then((function(e){return null===e.err&&(sessionStorage.setItem("userToken",e.data.token),window.location.href=window.location.origin+"/news"),t.innerHTML="",n.error=!0,n.msg=e.message,r()}))}))}return r()}(t,window.location.pathname);if(sessionStorage.getItem("userToken")){if("/bookmark"===window.location.pathname)return s(t),u(t);if("/news"===window.location.pathname)return s(t),l(t)}window.location.href=window.location.origin+"/"}(document.querySelector("#root"))}]);